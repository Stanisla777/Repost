<!DOCTYPE html>
<html>
<head>
    <title>YouNELL. Добавление фото</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/swiper.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
</head>
<body>

<div class="back-fridge">
    <div class="header">
        <span class="page-title">Добавление фото</span>
        <a href="timeline.html" class="back-x">
            <span class="x1"></span>
            <span class="x2"></span>
        </a>
    </div>
    <div class="content wrapper-photo-container">


        <div style="background-image: url(img/photo.png)" class="upload-file-container flex-center-center">
            <!--<div class="delete-foto"></div>-->

            <!--<img class="image" id="image" src="img/photo.png" alt=""/>-->

            <div class="upload-file-container-text">
                <input  type="file" name="pic[]" class="photo sd" />
            </div>
        </div>



        <!--<div class="box-container add-photo">-->
            <!--<input type="file" class="files" name="files[]" multiple />-->
        <!--</div>-->
        <a href="photo-option.html" class="photo-option-btn">Продолжить</a>
    </div>
</div>


<script type="text/javascript" src="js/jquery1.9.1.js"></script>
<script type="text/javascript" src="js/swiper.min.js"></script>
<script>
    var swiper = new Swiper('.swiper-container', {
        autoplay: true,
        initialSlide: 4,
        slidesPerView: 7
    });


//    открытие окна параметров
    $('.photo-option-btn').click(function () {
        $('.photo-option-container').addClass('visible');
    });
    $('.close-photo-option').click(function () {
        $('.photo-option-container').removeClass('visible');
    });

    var e =$(".upload-file-container").first().find(".photo");
    $(document).on("change",".photo",function(){

        var t = $(this).parents(".upload-file-container").find(".image");
        var u =$(this).parents(".upload-file-container");
        var i = $(this);
        var b = '<div class="delete-foto"></div>';
        var g = '<div style="background-image: url(img/photo.png)" class="upload-file-container">'

//        var y = '<div class="upload-file-container"><img class="image" id="image" src="img/photo.png" />' +
//                '<div class="upload-file-container-text"><input  type="file" name="pic[]" class="photo photo-addd" id="imgInput"/>' +
//                '</div></div>';

        var y = '<div style="background-image: url(img/photo.png)" class="upload-file-container">' +
                '<div class="upload-file-container-text"><input  type="file" name="pic[]" class="photo photo-addd" id="imgInput"/>' +
                '</div></div>';


        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {


                $(u).before(y);
//                $(t).attr('src', e.target.result);
                $(u).css('backgroundImage', "url(" + e.target.result + ")");
                $(i).attr("disabled","disabled");
                $(u).append(b);


            };
            reader.readAsDataURL(this.files[0]);
        }
    });

    $(document).on("click",".delete-foto",function(){
        $(this).parents(".upload-file-container").remove();
    });



























//    if(window.File && window.FileList && window.FileReader) {
//        $(".files").on("change",function(e) {
//
//
//            var files = e.target.files ,
//                    filesLength = files.length ;
//            for (var i = 0; i < filesLength ; i++) {
//                var f = files[i];
//                var fileReader = new FileReader();
//                fileReader.onload = (function(e) {
//                    var file = e.target;
//                    $('<img >',{
//                        class : "box-container imageThumb",
//                        src : e.target.result,
//                        title : file.name
//                    }).appendTo(".wrapper-photo-container");
//                });
//                fileReader.readAsDataURL(f);
//            }
//        });
//    } else { alert("Your browser doesn't support to File API") }






//    $(".upload-file-container").on("click",function (){
//        var y = '<div class="upload-file-container flex-center-center"><img id="image" src="img/photo.png" alt=""/>' +
//                '<div class="upload-file-container-text"><input type="file" name="pic[]" class="photo" id="imgInput"/>' +
//                '</div></div>';
//
//
//        $(y).appendTo('.wrapper-photo-container');
//    });

//    function readURL(input) {
//
//        if (input.files && input.files[0]) {
//            var reader = new FileReader();
//
//            reader.onload = function (e) {
//
//                $('.image').attr('src', e.target.result);
////                var t = $('.upload-file-container').clone(true);
////                $(t).appendTo('.wrapper-add-foto');
//
//            };
//            reader.readAsDataURL(input.files[0]);
//
////            var er = $(".upload-file-container").clone(true).appendTo(".wrapper-photo-container");
//
//
//                var y = '<div class="upload-file-container flex-center-center"><img id="image" src="img/photo.png" alt=""/>' +
//                        '<div class="upload-file-container-text"><input type="file" name="pic[]" class="photo" id="imgInput"/>' +
//                        '</div></div>';
////
////
////                $(y).appendTo('.wrapper-photo-container')
//
//        }
//    }


</script>
</body>
</html>